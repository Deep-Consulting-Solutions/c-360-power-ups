<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Start Timer</title>
    <script src="https://p.trellocdn.com/power-up.min.js"></script>
    <link rel="stylesheet" href="./css/styles.css">
</head>
<body>
    <div class="popup-container" id="popup-container">

            <!-- Content -->
            <div class="popup-content">
                <!-- Progress Indicator -->
                <div class="progress-section">
                    <div class="progress-label">
                        <span class="step-badge">1</span>
                        <span class="step-text">Select category and project</span>
                    </div>
                    <div class="progress-bar-bg">
                        <div class="progress-bar-fill" id="progress-bar"></div>
                    </div>
                </div>

                <!-- Category Selection -->
                <div class="form-group">
                    <label for="category-select" class="form-label">
                        Task Category
                        <span class="required">*</span>
                    </label>

                    <!-- Dropdown with predefined categories -->
                    <div class="select-wrapper">
                        <select id="category-select" class="form-select">
                            <option value="">-- Select Category --</option>
                            <!-- Categories will be populated here -->
                        </select>
                        <!-- ChevronDown Icon -->
                        <svg class="select-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polyline points="6 9 12 15 18 9"/>
                        </svg>
                    </div>

                    <!-- Custom category input (hidden by default) -->
                    <div id="custom-category-wrapper" class="custom-input-wrapper" style="display: none;">
                        <input
                            type="text"
                            id="custom-category-input"
                            class="form-input"
                            placeholder="Enter custom category..."
                            autocomplete="off"
                        />
                    </div>

                    <!-- Info Message -->
                    <div class="info-message" id="info-message">
                        <!-- AlertCircle Icon -->
                        <svg class="info-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="12" cy="12" r="10"/>
                            <line x1="12" y1="16" x2="12" y2="12"/>
                            <line x1="12" y1="8" x2="12.01" y2="8"/>
                        </svg>
                        <span>Please select a category to enable time tracking</span>
                    </div>
                </div>

                <!-- Project Selection -->
                <div class="form-group">
                    <label for="project-select" class="form-label">
                        Harvest Project
                        <span class="required">*</span>
                    </label>

                    <!-- Loading state for projects -->
                    <div id="project-loading" style="display: none;">
                        <div class="select-wrapper">
                            <select class="form-select" disabled>
                                <option>Loading projects...</option>
                            </select>
                        </div>
                    </div>

                    <!-- Project dropdown -->
                    <div id="project-dropdown" class="select-wrapper" style="display: none;">
                        <select id="project-select" class="form-select">
                            <option value="">-- Select Project --</option>
                            <!-- Projects will be populated here -->
                        </select>
                        <svg class="select-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polyline points="6 9 12 15 18 9"/>
                        </svg>
                    </div>

                    <!-- Error state -->
                    <div id="project-error" style="display: none;">
                        <div class="info-message" style="display: flex; margin-top: 0;">
                            <svg class="info-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="12" cy="12" r="10"/>
                                <line x1="12" y1="16" x2="12" y2="12"/>
                                <line x1="12" y1="8" x2="12.01" y2="8"/>
                            </svg>
                            <span>Failed to load Harvest projects. Please refresh.</span>
                        </div>
                    </div>

                    <!-- Info message -->
                    <div class="info-message" id="project-info-message" style="display: none;">
                        <svg class="info-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="12" cy="12" r="10"/>
                            <line x1="12" y1="16" x2="12" y2="12"/>
                            <line x1="12" y1="8" x2="12.01" y2="8"/>
                        </svg>
                        <span>Please select a project to track time</span>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="button-group">
                    <button id="start-timer-btn" class="btn btn-primary" disabled>
                        <!-- Play Icon -->
                        <svg class="btn-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polygon points="5 3 19 12 5 21 5 3"/>
                        </svg>
                        <span class="btn-text">Start Timer</span>
                        <span class="btn-spinner" style="display: none;">
                            <svg class="spinner" viewBox="0 0 50 50">
                                <circle class="path" cx="25" cy="25" r="20" fill="none" stroke-width="5"></circle>
                            </svg>
                        </span>
                    </button>

                    <button id="cancel-btn" class="btn btn-secondary">Cancel</button>
                </div>

                <!-- Helper Text (Success State) -->
                <!-- <div class="helper-box" id="helper-box" style="display: none;">
                    <p class="helper-text">
                        âœ“ Ready to track time for <strong id="selected-category-text"></strong> tasks
                    </p>
                </div> -->
            </div>

        <div class="toast" id="toast" style="display: none;">
            <div class="toast-content">
                <span class="toast-message"></span>
            </div>
        </div>
    </div>

    <script src="./js/config.js"></script>
    <script src="./js/popup.js"></script>
</body>
</html>
